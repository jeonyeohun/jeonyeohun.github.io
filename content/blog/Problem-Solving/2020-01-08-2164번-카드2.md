---
title: '[백준 알고리즘] 2164번: 카드2'
date: 2020-05-05 00:00:00
category: Problem-Solving
thumbnail: { thumbnailSrc }
draft: false
comments: true
---

### [2164번: 카드2](https://www.acmicpc.net/problem/2164)

```
문제
N장의 카드가 있다. 각각의 카드는 차례로 1부터 N까지의 번호가 붙어 있으며, 1번 카드가 제일 위에, N번 카드가 제일 아래인 상태로 순서대로 카드가 놓여 있다.

이제 다음과 같은 동작을 카드가 한 장 남을 때까지 반복하게 된다. 우선, 제일 위에 있는 카드를 바닥에 버린다. 그 다음, 제일 위에 있는 카드를 제일 아래에 있는 카드 밑으로 옮긴다.

예를 들어 N=4인 경우를 생각해 보자. 카드는 제일 위에서부터 1234 의 순서로 놓여있다. 1을 버리면 234가 남는다. 여기서 2를 제일 아래로 옮기면 342가 된다. 3을 버리면 42가 되고, 4를 밑으로 옮기면 24가 된다. 마지막으로 2를 버리고 나면, 남는 카드는 4가 된다.

N이 주어졌을 때, 제일 마지막에 남게 되는 카드를 구하는 프로그램을 작성하시오.

입력
첫째 줄에 정수 N(1≤N≤500,000)이 주어진다.

출력
첫째 줄에 남게 되는 카드의 번호를 출력한다.
```

### 접근 방법:

내가 찾은 규칙은 정렬되어 있는 1부터 N까지의 수들이 한칸씩 계속 건너뛰면서 삭제되는 것이다. 하나가 남을 때까지 진행되어야 되기 때문에 제일 마지막 수까지 도달하면 다시 원점으로 돌아와 삭제를 해야되는데 이때 삭제된 수들은 제외하고 한칸씩 가야한다. 이것을 벡터에 넣어서 erase로 구현하려고 처음에 시도했지만 시간초과가 났기 때문에 수학적인 규칙을 찾아서 일반식을 세워야 했다. 마지막에 남는 수를 쭉 나열해봤을 때 남는 수는 항상 짝수가 되는데 이 짝수는 특정 짝수 마다 범위가 늘어나게 된다. 무슨 말이냐면 N이 2일 때, 남는 수는 2, N이 4일 때 남는 수는 4, N이 8일 때, 남는 수는 8, ... N이 32일 때, 남는 수는 32가 된다. 따라서 남는 수는 2의 거듭제곱이 될 때마다 범위가 늘어나고 범위 안에서는 2부터 범위까지의 짝수들이 남는 수가 된다. 따라서 먼저 입력받은 수가 어느 범위에 속하는지 알아야한다. 나는 연산 시간을 최대한 줄이고자 비트연산을 이용하여 N보다 큰 2의 거듭제곱 수를 찾고, 해당 범위 안에서 입력된 수가 몇번째 수인지 찾아서 2부터 시작하여 해당 값만큼 짝수를 증가시켜주었다.

### 통과 코드:

```cpp
#include <iostream>

using namespace std;

int main(){
    int N;
    cin >> N;

    if (N<=2) { // 2 이하의 값은 그대로 출력하고 종료하면 된다.
        cout << N << endl;
        return 0;
    }

    int b = 1;
    for (int i = 0 ; ; i++){
        if ((b << i) > N) { // N보다 커질 때 까지 2^n 을 계속 취해서 범위찾기
            b = b << i;
            break;
        }
    }

    int result = 0;
    int bn = N%(b/2); // 범위 내에서 몇번째에 위치한 수인지 찾기
    if (bn == 0) result = b/2; // 딱 나누어 떨어지면 범위 내의 마지막 수이므로 b/2를 결과로 지정
    else
        for (int i = 0 ; i < bn ; i++) result += 2; // bn 번째 짝수를 만든다.

    cout << result;
}

```
